<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>用 conventional 来做 changelog 的简单配置说明 | xx 的 blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="Why so serious?">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.bf2bc087.css" as="style"><link rel="preload" href="/Blog/assets/js/app.ddc747ba.js" as="script"><link rel="preload" href="/Blog/assets/js/5.f279bc6b.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.d47c5c69.js"><link rel="prefetch" href="/Blog/assets/js/11.2fe08431.js"><link rel="prefetch" href="/Blog/assets/js/12.5efb260f.js"><link rel="prefetch" href="/Blog/assets/js/13.31e2902c.js"><link rel="prefetch" href="/Blog/assets/js/14.982a0d90.js"><link rel="prefetch" href="/Blog/assets/js/15.f30f2371.js"><link rel="prefetch" href="/Blog/assets/js/16.813f91ec.js"><link rel="prefetch" href="/Blog/assets/js/17.5d8a5e52.js"><link rel="prefetch" href="/Blog/assets/js/18.60fbcb9e.js"><link rel="prefetch" href="/Blog/assets/js/19.41f25847.js"><link rel="prefetch" href="/Blog/assets/js/2.9d76d8c1.js"><link rel="prefetch" href="/Blog/assets/js/20.082ec1de.js"><link rel="prefetch" href="/Blog/assets/js/21.17d9203b.js"><link rel="prefetch" href="/Blog/assets/js/22.3dc3096e.js"><link rel="prefetch" href="/Blog/assets/js/23.46545692.js"><link rel="prefetch" href="/Blog/assets/js/24.583f8319.js"><link rel="prefetch" href="/Blog/assets/js/25.e19d0793.js"><link rel="prefetch" href="/Blog/assets/js/26.3ab38960.js"><link rel="prefetch" href="/Blog/assets/js/27.7d4dad49.js"><link rel="prefetch" href="/Blog/assets/js/28.6ca3b67b.js"><link rel="prefetch" href="/Blog/assets/js/3.7efc1fe2.js"><link rel="prefetch" href="/Blog/assets/js/4.cd917f0e.js"><link rel="prefetch" href="/Blog/assets/js/6.f03e00ac.js"><link rel="prefetch" href="/Blog/assets/js/7.78f7ebc9.js"><link rel="prefetch" href="/Blog/assets/js/8.bdf8eb9f.js"><link rel="prefetch" href="/Blog/assets/js/9.e6f61a99.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.bf2bc087.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><section id="global-layout" data-v-47d6cdd7><header class="header" data-v-60b4f300 data-v-47d6cdd7><div class="header-navbar" data-v-60b4f300><div class="flex-xbc main header-nav" data-v-60b4f300><div class="nav-link" data-v-60b4f300><a href="/Blog/" class="inblock link-logo router-link-active" data-v-60b4f300><img data-src="./logo.png" loading="lazy" alt="logo" class="logo-img lazy" data-v-60b4f300></a> <nav class="link-list" data-v-60b4f300><a href="/Blog/" class="list-item router-link-active" data-v-60b4f300>Home</a><a href="/Blog/2022/" class="list-item" data-v-60b4f300>2022</a><a href="/Blog/2021/" class="list-item" data-v-60b4f300>2021</a><a href="/Blog/2020/" class="list-item" data-v-60b4f300>2020</a><a href="/Blog/2019/" class="list-item" data-v-60b4f300>2019</a><a href="/Blog/2018/" class="list-item router-link-active" data-v-60b4f300>2018</a><a href="/Blog/2016/" class="list-item" data-v-60b4f300>2016</a><a href="/Blog/tag/" class="list-item" data-v-60b4f300>Tags</a><a href="/Blog/about" class="list-item" data-v-60b4f300>about</a><a href="https://github.com/xxholly32/Blog" target="_blank" rel="noopener noreferrer" class="list-item" data-v-60b4f300>Github</a></nav></div> <div class="search-box" data-v-60b4f300><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div> </header> <!----> <section class="page" data-v-47d6cdd7 data-v-47d6cdd7><section class="info no-bg" data-v-0e872e9c><article class="main info-content" data-v-a7340d16 data-v-0e872e9c><div class="content-header" data-v-a7340d16><h1 class="header-title" data-v-a7340d16>用 conventional 来做 changelog 的简单配置说明</h1></div> <div class="flex-wcc content-tag" data-v-a7340d16><!----> <!----> <div class="inblock tag-list" data-v-a7340d16><a href="/Blog/tag/english/" class="tag-text" data-v-a7340d16>english
      </a><a href="/Blog/tag/skill/" class="tag-text" data-v-a7340d16>skill
      </a></div></div> <div class="content content__default" data-v-a7340d16><h1 id="用-conventional-来做-changelog-的简单配置说明"><a href="#用-conventional-来做-changelog-的简单配置说明" class="header-anchor">#</a> 用 conventional 来做 changelog 的简单配置说明</h1> <h2 id="日志操作相关命令"><a href="#日志操作相关命令" class="header-anchor">#</a> 日志操作相关命令</h2> <div class="language- extra-class"><pre class="language-text"><code>// 全局安装conventional-changelog commitizen
npm install -g conventional-changelog commitizen

// 提交代码
git cz

// 打tag自动生成changelog
npm version [major|minor|patch]

</code></pre></div><p>以下是在阮一峰基础上的扩展<a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener noreferrer">http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="cz-customizable"><a href="#cz-customizable" class="header-anchor">#</a> <a href="https://github.com/leonardoanalista/cz-customizable" target="_blank" rel="noopener noreferrer">cz-customizable<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>分类别添加 scope</p> <ul><li>安装</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// 之前要安装commitizen
// install
npm install cz-customizable --save-dev
</code></pre></div><ul><li>添加 package.json 配置</li></ul> <div class="language- extra-class"><pre class="language-text"><code>...
&quot;config&quot;: {
  &quot;commitizen&quot;: {
    &quot;path&quot;: &quot;node_modules/cz-customizable&quot;
  },
  // 这个默认指向.cz-config.js
  &quot;cz-customizable&quot;: {
    &quot;config&quot;: &quot;config/path/to/my/config.js&quot;
  }
}
</code></pre></div><ul><li>.cz-config.js</li></ul> <p>配置默认有个<a href="https://github.com/leonardoanalista/cz-customizable/blob/master/cz-config-EXAMPLE.js" target="_blank" rel="noopener noreferrer">example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>运行 git cz 后会让你选择你配置的 scopes</p> <h2 id="commitlint"><a href="#commitlint" class="header-anchor">#</a> <a href="https://github.com/marionebl/commitlint" target="_blank" rel="noopener noreferrer">commitlint<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <p>在阮一峰的文档里面，validate-commit-msg 官网写着已经废弃，并指向了 commitlint</p> <p>安装步骤就不详细说了，具体见<a href="https://marionebl.github.io/commitlint/#/guides-local-setup" target="_blank" rel="noopener noreferrer">这里<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>这里引入了<a href="https://github.com/typicode/husky" target="_blank" rel="noopener noreferrer">husky<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，在 git commit -m &quot;&quot; 或者直接 vscode 提交，项目提交都进行 hook，并抛出错误</p> <h2 id="思考"><a href="#思考" class="header-anchor">#</a> 思考</h2> <p>运用 conventional-changelog 官方都是推荐的 angular 的默认配置，也看过一些别的配置，由于配置项过多没有自己实现一个；后续可以根据项目需要自己去做一个相关的 js 配置。</p> <p>比较不喜欢的一点就是 angular 的配置，只有 fix,feature 及其他 2 个可以生成在配置文件中，doc 居然不行。</p> <p><a href="https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-cli" target="_blank" rel="noopener noreferrer">官方的说法是：<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>This will not overwrite any previous changelog. The above generates a changelog based on commits since the last semver tag that match the pattern of a &quot;Feature&quot;, &quot;Fix&quot;, &quot;Performance Improvement&quot; or &quot;Breaking Changes&quot;.</p></blockquote> <p>我测试了下还有个 Reverts 回退，是会记录在 changelog 上面的；</p> <p>有一些项目中的 merge，打包等，暂时没有选项，可以先写在不被记录的一些选项上，比如 doc。</p> <h3 id="附-commit-head-用途一览"><a href="#附-commit-head-用途一览" class="header-anchor">#</a> 附，commit head：用途一览</h3> <table><thead><tr><th style="text-align:left;">值</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">feat</td> <td style="text-align:left;">新增一个功能</td></tr> <tr><td style="text-align:left;">fix</td> <td style="text-align:left;">修复一个 Bug</td></tr> <tr><td style="text-align:left;">docs</td> <td style="text-align:left;">文档变更</td></tr> <tr><td style="text-align:left;">style</td> <td style="text-align:left;">代码风格变更（不影响功能，例如空格、分号等格式修正以及代码<code>review</code>缺陷修复等）</td></tr> <tr><td style="text-align:left;">refactor</td> <td style="text-align:left;">重构（不是修复 Bug，也不是新增功能）</td></tr> <tr><td style="text-align:left;">perf</td> <td style="text-align:left;">改善性能</td></tr> <tr><td style="text-align:left;">test</td> <td style="text-align:left;">增加测试</td></tr> <tr><td style="text-align:left;">chore</td> <td style="text-align:left;">开发工具变动（构建，脚手架工具等）</td></tr> <tr><td style="text-align:left;">revert</td> <td style="text-align:left;">代码回退</td></tr></tbody></table> <blockquote><p>相关文献</p></blockquote> <ul><li><a href="http://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html" target="_blank" rel="noopener noreferrer">Commit message 和 Change log 编写指南 阮一峰<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <div class="content-time" data-v-a7340d16><time datetime="Jan 1, 2018" class="time-text" data-v-a7340d16>Create Time: Jan 1, 2018
    </time> <time datetime="Nov 5, 2020" class="time-text" data-v-a7340d16>Last Updated: Nov 5, 2020
    </time></div></article> <section class="flex-xb main info-nav" data-v-02f14c88 data-v-0e872e9c><!----> <a href="/Blog/2018/github-issues-workflow.html" class="flex-xb nav-item" data-v-02f14c88><div class="flex-xcc item-img" data-v-02f14c88><img data-src="https://cdn.stocksnap.io/img-thumbs/960w/BRHQBEKMEW.jpg" loading="lazy" alt="如何用 github 的 issues 来做日常工作管理" class="img lazy" data-v-02f14c88></div> <article class="flex-ysc item-content" data-v-02f14c88><h2 class="content-title" data-v-02f14c88>如何用 github 的 issues 来做日常工作管理</h2> <div class="content" data-v-02f14c88></div></article></a></section> <!----></section></section> <footer class="footer" data-v-36d98cbc data-v-47d6cdd7><nav class="link-list" data-v-36d98cbc></nav> <a href="/Blog/" class="copyright router-link-active" data-v-36d98cbc>xx 的 blog © 2022</a></footer></section><div class="global-ui"><!----><!----></div></div>
    <script src="/Blog/assets/js/app.ddc747ba.js" defer></script><script src="/Blog/assets/js/5.f279bc6b.js" defer></script>
  </body>
</html>
