(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{429:function(t,e,r){"use strict";r.r(e);var a=r(5),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"vue-单元测试心得总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vue-单元测试心得总结"}},[t._v("#")]),t._v(" vue 单元测试心得总结")]),t._v(" "),r("h2",{attrs:{id:"为什么要单元测试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#为什么要单元测试"}},[t._v("#")]),t._v(" 为什么要单元测试")]),t._v(" "),r("p",[t._v("我认为的单元测试就是，万一我改动了某个代码，导致了当前功能或者是别的功能的问题（主要是后者）；还有一点就是，不用等着浏览器打开，就能知道代码是否存在问题。")]),t._v(" "),r("p",[t._v("其实最好的方式就是写代码的同时，就开始写测试用例。")]),t._v(" "),r("p",[t._v("如果写完代码再写单元测试，会失去写单元测试的意义。")]),t._v(" "),r("h2",{attrs:{id:"单元测试的内容"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#单元测试的内容"}},[t._v("#")]),t._v(" 单元测试的内容")]),t._v(" "),r("p",[t._v("首先要明白我们要测试什么，添加了一个样式就要加用例？所有的方法都要进行测试？")]),t._v(" "),r("p",[t._v("这里我推荐一段 vue-test-util 的文献")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://vue-test-utils.vuejs.org/zh-cn/guides/common-tips.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vue-test-utils.vuejs.org/zh-cn/guides/common-tips.html"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("对于 UI 组件来说，我们不推荐一味追求行级覆盖率，因为它会导致我们过分关注组件的内部实现细节，从而导致琐碎的测试。")]),t._v(" "),r("p",[t._v("所以我们要做的是模拟一些关键行为并产生了某一种结果，测试这个结果\n是否是达到了我们的预想值；一般的关键行为测试是一个简单流程的操作，比如一次点击，一个 UI 组件的生产；可能是人为的，也有可能是代码生成的；")]),t._v(" "),r("p",[t._v("但不是对所有 UI 组件的方法测试。所以我们代码测试覆盖率不用 100%")]),t._v(" "),r("h3",{attrs:{id:"测试覆盖率的作用"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#测试覆盖率的作用"}},[t._v("#")]),t._v(" 测试覆盖率的作用")]),t._v(" "),r("p",[t._v("那你大概会问：“那测试覆盖到底有什么用呢？”。我的答案还是很简单，“测试覆盖是一种学习手段”。学习什么呢？学习为什么有些代码没有被覆盖到，以及为什么有些代码变了测试却没有失败。理解“为什么”背后的原因，程序员就可以做相应的改善和提高，相比凭空想象单元测试的有效性和代码的好坏，这会更加有效")]),t._v(" "),r("p",[t._v("———— 摘自 "),r("a",{attrs:{href:"http://www.infoq.com/cn/articles/test-coverage-rate-role",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.infoq.com/cn/articles/test-coverage-rate-role"),r("OutboundLink")],1)]),t._v(" "),r("h3",{attrs:{id:"样式如何测试"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#样式如何测试"}},[t._v("#")]),t._v(" 样式如何测试")]),t._v(" "),r("p",[t._v("我个人认为的样式测试是穿插在单元测试中的，比如找容器；都会用到我们的样式表但并不会测试样式中有什么内容；")]),t._v(" "),r("p",[t._v("但一些特殊的操作，比如 hover、active 以后 class 值的变化，也是需要的。这也是产生了某一种结果。")]),t._v(" "),r("h2",{attrs:{id:"单元测试框架"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#单元测试框架"}},[t._v("#")]),t._v(" 单元测试框架")]),t._v(" "),r("p",[t._v("虽然 vue.js 官方文档没有写出，但 vue-test-util 上写的是 vue 的官方测试工具库")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://vue-test-utils.vuejs.org/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vue-test-utils.vuejs.org/zh-cn/"),r("OutboundLink")],1)]),t._v(" "),r("p",[t._v("我在本实例中也对项目中的 vuex，router，axios 进行了测试，确实比较好用。")]),t._v(" "),r("p",[t._v("我们熟悉的 Element-UI 内部自己实现了一套，也挺好用的；但并没有封装出去。")]),t._v(" "),r("h2",{attrs:{id:"单元测试工具对比"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#单元测试工具对比"}},[t._v("#")]),t._v(" 单元测试工具对比")]),t._v(" "),r("h3",{attrs:{id:"jest-与-mocha"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#jest-与-mocha"}},[t._v("#")]),t._v(" Jest 与 Mocha")]),t._v(" "),r("p",[t._v("vue-cli 自带的 2 个选项是 jest 和 karam 加 mocha 的选项")]),t._v(" "),r("p",[t._v("jest 和 mocha 都是属于测试框架，我这里只使用过 mocha，一方面是 jest 不能和 karma 使用；另一方面是 mocha 的文档比较详细；")]),t._v(" "),r("p",[t._v("我推荐一篇阮一峰的博文"),r("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.ruanyifeng.com/blog/2015/12/a-mocha-tutorial-of-examples.html"),r("OutboundLink")],1),t._v("；里面基本把 mocha 和一些 mocha 的使用方法都介绍一遍；")]),t._v(" "),r("h3",{attrs:{id:"karam"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#karam"}},[t._v("#")]),t._v(" Karam")]),t._v(" "),r("p",[t._v("而 karma 是一个专门用于 JS 运行的一个工具(Spectacular Test Runner for JavaScript)，这边 karma 主要搭建文档"),r("a",{attrs:{href:"https://segmentfault.com/a/1190000006895064",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://segmentfault.com/a/1190000006895064"),r("OutboundLink")],1),t._v("也说了比较详细了。")]),t._v(" "),r("p",[t._v("划重点：")]),t._v(" "),r("ul",[r("li",[t._v("在脚手架中 karma 默认是 PhantomJS，也可以用 chrome 和 IE，基于开发方便，建议直接改为 chrome!")])]),t._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("# karam.conf.js\n\ncustomLaunchers: {\n  Chrome_travis_ci: {\n    base: 'Chrome',\n    flags: ['--no-sandbox']\n  }\n},\n\n")])])]),r("p",[t._v("Element-ui 也从之前的 PhantomJS 改成了 chrome，这使得 test:watch 非常方便，能够直接在代码中打断点；本项目也采用了这个方案。")]),t._v(" "),r("p",[t._v("但 chrome 的 tools 没法使用。")]),t._v(" "),r("ul",[r("li",[t._v("karma 浏览器开始测试的时候会弹出 chrome，尽量不要去动它；有几率会存在获取不到元素；")])]),t._v(" "),r("h3",{attrs:{id:"断言库-chai"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#断言库-chai"}},[t._v("#")]),t._v(" 断言库 chai")]),t._v(" "),r("p",[t._v("断言库基本采用的是 chai")]),t._v(" "),r("p",[t._v("这里放一个 API 方便以后学习")]),t._v(" "),r("p",[r("a",{attrs:{href:"https://www.jianshu.com/p/f200a75a15d2",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jianshu.com/p/f200a75a15d2"),r("OutboundLink")],1)]),t._v(" "),r("h2",{attrs:{id:"结束"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#结束"}},[t._v("#")]),t._v(" 结束")]),t._v(" "),r("p",[t._v("这样就基本覆盖到了所有需求，有关具体的单元测试内容，还是需要开发人员认真去训练才能达到单元测试的目的。")]),t._v(" "),r("p",[r("strong",[t._v("相关文献")])]),t._v(" "),r("p",[t._v("unit")]),t._v(" "),r("blockquote",[r("p",[t._v("vue-test-utils : "),r("a",{attrs:{href:"https://vue-test-utils.vuejs.org/zh-cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vue-test-utils.vuejs.org/zh-cn/"),r("OutboundLink")],1),t._v("\n如何对 vue.js 单文件（.vue）进行单元测试？: "),r("a",{attrs:{href:"https://www.zhihu.com/question/50566681/answer/267276949",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.zhihu.com/question/50566681/answer/267276949"),r("OutboundLink")],1),t._v("\nChai.js 断言库 API 中文文档 "),r("a",{attrs:{href:"https://www.jianshu.com/p/f200a75a15d2",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jianshu.com/p/f200a75a15d2"),r("OutboundLink")],1),t._v("\n前端单元测试之 Karma 环境搭建 "),r("a",{attrs:{href:"https://segmentfault.com/a/1190000006895064",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://segmentfault.com/a/1190000006895064"),r("OutboundLink")],1),t._v("\n测试覆盖（率）到底有什么用？ "),r("a",{attrs:{href:"http://www.infoq.com/cn/articles/test-coverage-rate-role",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.infoq.com/cn/articles/test-coverage-rate-role"),r("OutboundLink")],1)])]),t._v(" "),r("p",[t._v("e2e")]),t._v(" "),r("blockquote",[r("p",[t._v("使用 Nightwatch 进行 E2E 测试中文教程: "),r("a",{attrs:{href:"https://www.jianshu.com/p/936bee074b66",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jianshu.com/p/936bee074b66"),r("OutboundLink")],1),t._v("\nyyx 的 nightwatch-helpers "),r("a",{attrs:{href:"https://github.com/yyx990803/nightwatch-helpers",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/yyx990803/nightwatch-helpers"),r("OutboundLink")],1),t._v("\nnightwatch API 中文版："),r("a",{attrs:{href:"https://www.cnblogs.com/saryli/p/6903873.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.cnblogs.com/saryli/p/6903873.html"),r("OutboundLink")],1),t._v("\n怎么为大中型的 vue.js 项目编写 e2e 测试？: "),r("a",{attrs:{href:"https://www.zhihu.com/question/51764943?from=profile_question_card",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.zhihu.com/question/51764943?from=profile_question_card"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=s.exports}}]);