<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>what-i-learn-from-analysis-vuepress | xx 的 blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="第一届滨江缤纷前端技术大会上发表的同名演讲实录">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.bf2bc087.css" as="style"><link rel="preload" href="/Blog/assets/js/app.ddc747ba.js" as="script"><link rel="preload" href="/Blog/assets/js/18.60fbcb9e.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.d47c5c69.js"><link rel="prefetch" href="/Blog/assets/js/11.2fe08431.js"><link rel="prefetch" href="/Blog/assets/js/12.5efb260f.js"><link rel="prefetch" href="/Blog/assets/js/13.31e2902c.js"><link rel="prefetch" href="/Blog/assets/js/14.982a0d90.js"><link rel="prefetch" href="/Blog/assets/js/15.f30f2371.js"><link rel="prefetch" href="/Blog/assets/js/16.813f91ec.js"><link rel="prefetch" href="/Blog/assets/js/17.5d8a5e52.js"><link rel="prefetch" href="/Blog/assets/js/19.41f25847.js"><link rel="prefetch" href="/Blog/assets/js/2.9d76d8c1.js"><link rel="prefetch" href="/Blog/assets/js/20.082ec1de.js"><link rel="prefetch" href="/Blog/assets/js/21.17d9203b.js"><link rel="prefetch" href="/Blog/assets/js/22.3dc3096e.js"><link rel="prefetch" href="/Blog/assets/js/23.46545692.js"><link rel="prefetch" href="/Blog/assets/js/24.583f8319.js"><link rel="prefetch" href="/Blog/assets/js/25.e19d0793.js"><link rel="prefetch" href="/Blog/assets/js/26.3ab38960.js"><link rel="prefetch" href="/Blog/assets/js/27.7d4dad49.js"><link rel="prefetch" href="/Blog/assets/js/28.6ca3b67b.js"><link rel="prefetch" href="/Blog/assets/js/3.7efc1fe2.js"><link rel="prefetch" href="/Blog/assets/js/4.cd917f0e.js"><link rel="prefetch" href="/Blog/assets/js/5.f279bc6b.js"><link rel="prefetch" href="/Blog/assets/js/6.f03e00ac.js"><link rel="prefetch" href="/Blog/assets/js/7.78f7ebc9.js"><link rel="prefetch" href="/Blog/assets/js/8.bdf8eb9f.js"><link rel="prefetch" href="/Blog/assets/js/9.e6f61a99.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.bf2bc087.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><section id="global-layout" data-v-47d6cdd7><header class="header" data-v-60b4f300 data-v-47d6cdd7><div class="header-navbar" data-v-60b4f300><div class="flex-xbc main header-nav" data-v-60b4f300><div class="nav-link" data-v-60b4f300><a href="/Blog/" class="inblock link-logo router-link-active" data-v-60b4f300><img data-src="./logo.png" loading="lazy" alt="logo" class="logo-img lazy" data-v-60b4f300></a> <nav class="link-list" data-v-60b4f300><a href="/Blog/" class="list-item router-link-active" data-v-60b4f300>Home</a><a href="/Blog/2022/" class="list-item" data-v-60b4f300>2022</a><a href="/Blog/2021/" class="list-item" data-v-60b4f300>2021</a><a href="/Blog/2020/" class="list-item" data-v-60b4f300>2020</a><a href="/Blog/2019/" class="list-item router-link-active" data-v-60b4f300>2019</a><a href="/Blog/2018/" class="list-item" data-v-60b4f300>2018</a><a href="/Blog/2016/" class="list-item" data-v-60b4f300>2016</a><a href="/Blog/tag/" class="list-item" data-v-60b4f300>Tags</a><a href="/Blog/about" class="list-item" data-v-60b4f300>about</a><a href="https://github.com/xxholly32/Blog" target="_blank" rel="noopener noreferrer" class="list-item" data-v-60b4f300>Github</a></nav></div> <div class="search-box" data-v-60b4f300><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div></div></div> </header> <!----> <section class="page" data-v-47d6cdd7 data-v-47d6cdd7><section class="info no-bg" data-v-0e872e9c><article class="main info-content" data-v-a7340d16 data-v-0e872e9c><div class="content-header" data-v-a7340d16><h1 class="header-title" data-v-a7340d16>what-i-learn-from-analysis-vuepress</h1></div> <div class="flex-wcc content-tag" data-v-a7340d16><!----> <!----> <div class="inblock tag-list" data-v-a7340d16><a href="/Blog/tag/vuepress/" class="tag-text" data-v-a7340d16>vuepress
      </a><a href="/Blog/tag/analysis/" class="tag-text" data-v-a7340d16>analysis
      </a></div></div> <div class="content content__default" data-v-a7340d16><blockquote><p>本文为 2019 年 6 月 8 日我在第一届滨江缤纷前端技术大会上发表的同名演讲实录。</p></blockquote> <h2 id="个人介绍"><a href="#个人介绍" class="header-anchor">#</a> 个人介绍</h2> <p>首先作下自我介绍，我是来自海康威视的综合安防前端组的相霄 👨‍💻 🏸 🎦</p> <p>今天给大家带来我对 vuepress 的一些分析与实战技巧。</p> <p>本文思路参考 <code>vueconf2</code> 的 <a href="https://img.w3ctech.com/What-I-Learned-from-Maintaining-Vue-CLI.pdf" target="_blank" rel="noopener noreferrer">what-i-learn-from-maintain-vue-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img alt="" data-src="/Blog/2019binfen/ana1.jpg" loading="lazy" class="lazy"></p> <blockquote><p>ppt 地址请查看 <a href="https://xxholly32.github.io/what-i-learned-from-analysis-vuepress/" target="_blank" rel="noopener noreferrer">传送门<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="介绍-vuepress"><a href="#介绍-vuepress" class="header-anchor">#</a> 介绍 vuepress</h2> <p>vuepress 是 vue 全家桶之外的技术，就算是用 vue 全家桶的同学也不一定会知道 vuepress，我先从几个案例简单介绍一下 vuepress</p> <p><img alt="" data-src="/Blog/2019binfen/ana2.jpg" loading="lazy" class="lazy"></p> <p>首先是 vue 官方文档，<a href="https://cn.vuejs.org/" target="_blank" rel="noopener noreferrer">vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://cli.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vue-cli<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://router.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vue-router<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://v1.vuepress.vuejs.org/zh/" target="_blank" rel="noopener noreferrer">vuepress<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等都是用了 vuepress 编写</p> <p><img alt="" data-src="/Blog/2019binfen/ana3.jpg" loading="lazy" class="lazy"></p> <p>接下来是 <code>react</code> 系的一些脚手架，<a href="https://umijs.org/" target="_blank" rel="noopener noreferrer">umijs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 <a href="https://dvajs.com/" target="_blank" rel="noopener noreferrer">dvajs<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等也是用了 vuepress</p> <p><img alt="" data-src="/Blog/2019binfen/ana4.jpg" loading="lazy" class="lazy"></p> <p>还有一些社区优秀的博主也会使用 vuepress，比如我个人关注的 <a href="https://wubaiqing.github.io/zaobao/" target="_blank" rel="noopener noreferrer">每日时报<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img alt="" data-src="/Blog/2019binfen/ana5.jpg" loading="lazy" class="lazy"></p> <p>最后看一个不一样的风格的 vuepress，是我<a href="http://xxholly32.github.io/Blog/" target="_blank" rel="noopener noreferrer">个人博客<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，也是使用 vuepress 去做的</p> <p>所以 vuepress 本质是静态网站生成器，主要用于技术文档，技术分享，个人博客等场景</p> <h2 id="vuepress-帮我们解决了什么问题呢-🤔"><a href="#vuepress-帮我们解决了什么问题呢-🤔" class="header-anchor">#</a> vuepress 帮我们解决了什么问题呢 🤔</h2> <p>我个人负责公司通用 ui 库的开发工作，我在 2 年前参考了社区某外卖行业的 ui 库进行开发；而在去年这个时候由于业务调整需要对我们的 ui 库进行一波升级；顺便对我们整个框架结构进行升级；在研究了老的系统后发现里面的文档系统特别难维护，特别是一些封装的第三方库都不怎么维护了。再参考了 <code>antd</code> 、<code>elementui</code>、 <code>iview</code> 等一些框架以后，我最终决定把文档系统改为 vuepress ；</p> <p>主要有一下几点：</p> <p>1.支持 markdown 语法</p> <p>之所以选用 vuepress，最重要的一点原因是它天然支持在 markdown 中使用 vue，在我们内部 ui 库 1.0 的框架中文档也是用 markdown 写的，这也使我们 ui 升级在文档这块不需要特别大的改动。反而在文档代码中还可以加入 vuepress 默认的很多新语法。</p> <p>2.提升开发效率，标准化框架</p> <p>vuepress 的配置非常精简，几乎只需要配置一个 config.js 而以前配置还需要配置 webpack 等很多复杂的 build 文件；在标准化方面也支持 ie11 等主流浏览器；从 0~1 快速搭建项目非常方便，甚至我们内部的其他一些脚手架也基本都是用 vuepress 写的</p> <p>3.部署便捷</p> <p>部署适用于内部的 gitlab 和外部的 github，而且命令也非常简单只需 <code>vuepress run build</code></p> <p>4-5.约定式路由以及统一页面风格</p> <p>这 2 点对于开发人员来说非常好，开发者不需要关注路由以及页面样式；让开发者花更多的时间关注在文档编写上。</p> <p><img alt="" data-src="/Blog/2019binfen/ana6.jpg" loading="lazy" class="lazy"></p> <p>还有一个个人的原因 vuepress 支持 emoji，这个在枯燥代码文档编写的同时，增加了情感化元素在里面，让内容更加生动</p> <h2 id="vuepress-在其他场景的应用-👷‍"><a href="#vuepress-在其他场景的应用-👷‍" class="header-anchor">#</a> Vuepress 在其他场景的应用 👷‍</h2> <p>当然除了技术文档上的贡献是巨大的，它能做的还有更多</p> <h3 id="vuepress-plugin-yuque"><a href="#vuepress-plugin-yuque" class="header-anchor">#</a> <a href="https://github.com/ulivz/vuepress-plugin-yuque" target="_blank" rel="noopener noreferrer">vuepress-plugin-yuque<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>先说一下公司内部的痛苦，我们是无法用语雀写文档的，vuepress-plugin-yuque 可以实现将外部的文档数据转化为本地的文档；所以只要你愿意，未来你可以将任意数据源转化成 vuepress；那这有什么好处呢，我们在公司内部有很多 oa 的数据，它的展现方式并不是非常直观，或者我们有一些业务扩展类的需求没法直接在 oa 上呈现。但我们可以拿到它的数据，在 vuepress 做展现，我们有一些定制类的项目每周有很多个分配个不同的人；我们将数据拿到用日历的方式展现在 vuepress 中，就可以直观的看到每个人每天有什么任务了。</p> <p><img alt="" data-src="/Blog/2019binfen/ana7.jpg" loading="lazy" class="lazy"></p> <h3 id="vuepress-plugin-gitalk-maker"><a href="#vuepress-plugin-gitalk-maker" class="header-anchor">#</a> <a href="https://xxholly32.github.io/vuepress-plugin-gitalk-maker/guide/" target="_blank" rel="noopener noreferrer">vuepress-plugin-gitalk-maker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>上面的例子，数据还是纯静态的；来说一个基于 token 认证的动态数据的例子，个人编写的插件 vuepress-pligin-gitalk-maker；gitalk 是基于 github 的一个 issues 展现功能，放在 vuepress 中，支持每个文档一个 issues；使用这个插件的好处是，在编写文档的时候我们会发现，文档写的再好还是会有问，而且一些问题的说明并不仅仅需要写在文档中，而是在评论中可以体现；我个人也会经常在 github issues 中寻找自己要的答案，这个插件就提供这种可能性，让评论去驱动大家提 issues，而且好的回复通常都会得到高的点赞数，让排名靠前（这个暂时还没支持）。</p> <p><img alt="" data-src="/Blog/2019binfen/ana8.jpg" loading="lazy" class="lazy"></p> <p>这个插件还有 gitlab 版本这个我们在公司内部做了开源，外部还有一个 <a href="https://github.com/meteorlxy/vssue" target="_blank" rel="noopener noreferrer">vssue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 更强大，支持多个社区类 issues；这个就让 vuepress 不仅仅是个静态文档了，更像是一个论坛了。</p> <p>基于这个功能，和 vuepress 强大的博客系统，我们在内部也做了很多的项目。公司羽毛球官网，组内团建，照片墙，新人成长计划等等一系列网站。而在下面都加了评论功能，能收到不少小伙伴们有爱的回复。</p> <h2 id="vuepress-优秀设计理念-🌈"><a href="#vuepress-优秀设计理念-🌈" class="header-anchor">#</a> Vuepress 优秀设计理念 🌈</h2> <p>讲了一些实战的例子，我们回顾分析一下 vuepress 的一些优秀设计理念；这边先分享一个个人对 vuepress 的源码分析，vuepress-analysis；理念来自于 vue-cli-analysis</p> <h3 id="markdown-it-chain"><a href="#markdown-it-chain" class="header-anchor">#</a> markdown-it-chain</h3> <p>如果了解 <a href="https://github.com/neutrinojs/webpack-chain" target="_blank" rel="noopener noreferrer">webpack-chain<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的同学们应该可以知道这个是用来干什么的，<a href="https://github.com/ulivz/markdown-it-chain" target="_blank" rel="noopener noreferrer">markdown-it-chain<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是支持链式调用 markdown-it 的文档解析工具。刚才又说道 vuepress 是支持 markdown 语法的，而 markdown-it-chain 就是 vuepress 解析 markdown 的灵魂。</p> <p>我们看一组官方代码</p> <p><img alt="" data-src="/Blog/2019binfen/ana9.jpg" loading="lazy" class="lazy"></p> <p>以上代码就实现了简单的目录和锚点功能，我之前在技术选型中有做过一些对比，有些框架的目录和锚点功能单独封装成插件的形式，虽然也是解耦但对于这种再剥离成语言解析层面的解耦，会用起来更舒服。其实 markdown-it-chain 不仅仅可以使用于 vuepress，只要是有 markdown 文档解析的软件都是可以适用的，现在 star 人数还不是很多，大家还不操作起来。</p> <h3 id="monorepo"><a href="#monorepo" class="header-anchor">#</a> <a href="https://github.com/babel/babel/blob/master/doc/design/monorepo.md" target="_blank" rel="noopener noreferrer">Monorepo<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>这个也是老生常谈的话题，monorepo 是一种项目代码管理的一种方式，指的是在一个项目（repo）中管理多个某块的包，不同于常见的一个模块一个（repo）；这里蹭一波 vue3 的热度，vue-cli 和 vuepress 都是 monorepo 的实现的，最新 vue3 的 next 也是基于 monorepo 管理，大家使用的时候可以单独引入比如 test，runtime 的一些库。</p> <p>在 vuepress 中本身的 core 实现了插件化，内部有很多默认的插件，比如 back-to-top，项目不需要是默认不使用的，还有比如 search 是默认使用的。vuepress1.x 将主题也做成了插件化。做社区最重要的是不做什么，而 vuepress 的 monorepo 的一些插件基本都是通用的功能，插件化和 monorepo 的设计是值得我们去学习的。</p> <p>monorepo 最早是 babel 在使用，也沉淀了一些对它的理解，这个在 <a href="https://github.com/babel/babel/blob/master/doc/design/monorepo.md#why-is-babel-a-monorepo" target="_blank" rel="noopener noreferrer">babel 官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 可以看到</p> <ul><li>Single lint, build, test and release process.</li> <li>Easy to coordinate changes across modules.</li> <li>Single place to report issues.</li> <li>Easier to setup a development environment.</li> <li>Tests across modules are run together which finds bugs that touch multiple modules more easily.</li></ul> <h3 id="约定大于配置-合理的优先级管理"><a href="#约定大于配置-合理的优先级管理" class="header-anchor">#</a> <a href="https://v1.vuepress.vuejs.org/miscellaneous/design-concepts.html#convention-over-configuration" target="_blank" rel="noopener noreferrer">约定大于配置，合理的优先级管理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>这些也是体现在插件的默认配置和设计中，特别是文档目录结构的设计以及主题目录的设计。往往好的设计都是少配置甚至 0 配置的。</p> <p>我们从 vuepress1.x 的主题系统分析一下这个设计理念。说这个理念之前我先说一个个人非常喜欢玩的游戏炉石传说，炉石传说是 30 张卡 2 人对战的回合制游戏。在炉石区有个说法就是，一套卡组（30 张）只要改一张就是我的卡组了。这个理念就刚好来说明 vuepress 的主题系统在默认的某个文件夹下面，默认的皮肤都在 theme-default 下，开发人员不需要修改所有的皮肤组件，只需要针对自己想要改的元素适当的修改某个指定的元素就可以了，比如我们公司内部的 ui 库只改一个首页<code>Home.vue</code>也可以是一个 vuepress 的自定义皮肤，而实现这个原理就是采用 webpack 的 alias 功能这么简单。</p> <h2 id="社区优秀实践-🛰"><a href="#社区优秀实践-🛰" class="header-anchor">#</a> 社区优秀实践 🛰</h2> <h3 id="vuepress-community"><a href="#vuepress-community" class="header-anchor">#</a> <a href="https://vuepress.github.io/zh/" target="_blank" rel="noopener noreferrer">vuepress-community<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>社区维护的 vuepress 生态系统，由@Shigma 和@meteorlxy 维护，上面介绍的 vuepress 项目比较实用而且有很好的文档说明</p> <p><img alt="" data-src="/Blog/2019binfen/ana10.jpg" loading="lazy" class="lazy"></p> <h3 id="vuepress-plugin-cat"><a href="#vuepress-plugin-cat" class="header-anchor">#</a> <a href="https://github.com/QiShaoXuan/vuepress-plugin-cat" target="_blank" rel="noopener noreferrer">vuepress-plugin-cat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>vuepress 在线撸猫插件，作者也是<a href="https://github.com/QiShaoXuan/css_tricks" target="_blank" rel="noopener noreferrer">css tricks<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的作者@QiShaoXuan，里面有非常多的优秀实践，撸猫只是其中的一个功能点；我们组有部分同事引入了，所以给大家推荐一下。</p> <p><img alt="" data-src="/Blog/2019binfen/ana11.jpg" loading="lazy" class="lazy"></p> <h3 id="vuepress-theme-default-prefers-color-scheme"><a href="#vuepress-theme-default-prefers-color-scheme" class="header-anchor">#</a> <a href="https://tolking.github.io/vuepress-theme-default-prefers-color-scheme/" target="_blank" rel="noopener noreferrer">vuepress-theme-default-prefers-color-scheme<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h3> <p>基于 css 语法 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-color-scheme" target="_blank" rel="noopener noreferrer">prefers-color-scheme<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 做的一个主题插件，可以配置时段让你的 vuepress 拥有半天和黑夜的功能。我个人是在做 vuepress 的主题切换的时候发现的，因为哦们内部 ui 库需要支持切换皮肤，现在还没有特别好的方案。其中一种是和 elementui 一样直接全局替换 css 的方式，但做法还是感觉比较 low。如果有好的建议欢迎给我留言。</p> <p><img alt="" data-src="/Blog/2019binfen/ana12.jpg" loading="lazy" class="lazy"></p> <p>这个作者也是我博客的主题的开发作者，@tolking，有关主题可以查看 <a href="https://github.com/tolking/vuepress-theme-ououe" target="_blank" rel="noopener noreferrer">vuepress-theme-ououe<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>VuePress is much more than that. —— ULIVZ</p> <p>😊</p> <h2 id="扩展阅读"><a href="#扩展阅读" class="header-anchor">#</a> 扩展阅读</h2> <p><a href="https://www.youtube.com/watch?v=lIv1ItUzktc" target="_blank" rel="noopener noreferrer">VueNYC - Intro to VuePress 0.x - Evan You<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://ulivz.com/2019/06/09/intro-to-vuepress-1-x/#intro-to-vuepress-1-x" target="_blank" rel="noopener noreferrer">Vueconf3 - Intro to VuePress 1.x - ULIVZ<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>更多的源码分析请查看 <a href="https://xxholly32.github.io/vuepress-analysis/" target="_blank" rel="noopener noreferrer">Vuepress-analysis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 😊</p></div> <div class="content-time" data-v-a7340d16><time datetime="Oct 26, 2019" class="time-text" data-v-a7340d16>Create Time: Oct 26, 2019
    </time> <time datetime="Dec 29, 2019" class="time-text" data-v-a7340d16>Last Updated: Dec 29, 2019
    </time></div></article> <section class="flex-xb main info-nav" data-v-02f14c88 data-v-0e872e9c><a href="/Blog/2019/end-of-2019.html" class="flex-xb nav-item" data-v-02f14c88><div class="flex-xcc item-img" data-v-02f14c88><img data-src="/Blog/2019.jpeg" loading="lazy" alt="2019 总结" class="img lazy" data-v-02f14c88></div> <article class="flex-ysc item-content" data-v-02f14c88><h2 class="content-title" data-v-02f14c88>2019 总结</h2> <div class="content" data-v-02f14c88></div></article></a> <a href="/Blog/2019/zengguoan-jiashu.html" class="flex-xb nav-item" data-v-02f14c88><div class="flex-xcc item-img" data-v-02f14c88><img data-src="/Blog/曾国藩.jpeg" loading="lazy" alt="曾国藩家书" class="img lazy" data-v-02f14c88></div> <article class="flex-ysc item-content" data-v-02f14c88><h2 class="content-title" data-v-02f14c88>曾国藩家书</h2> <div class="content" data-v-02f14c88></div></article></a></section> <!----></section></section> <footer class="footer" data-v-36d98cbc data-v-47d6cdd7><nav class="link-list" data-v-36d98cbc></nav> <a href="/Blog/" class="copyright router-link-active" data-v-36d98cbc>xx 的 blog © 2022</a></footer></section><div class="global-ui"><!----><!----></div></div>
    <script src="/Blog/assets/js/app.ddc747ba.js" defer></script><script src="/Blog/assets/js/18.60fbcb9e.js" defer></script>
  </body>
</html>
